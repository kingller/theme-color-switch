{"version":3,"sources":["ColorPicker.js","Theme.js","App.js","index.js","dest/color.less"],"names":["noop","pickers","chrome","ChromePicker","sketch","SketchPicker","ColorPicker","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleClick","setState","displayColorPicker","state","handleClose","handleChange","color","hex","onChange","handleChangeComplete","onChangeComplete","nextProps","_this$props","small","type","position","Picker","styles","width","height","borderRadius","background","swatch","padding","boxShadow","display","cursor","popover","zIndex","cover","top","right","bottom","left","wrapper","transform","paddingBottom","react_default","a","createElement","style","onClick","picker","assign","Component","defaultProps","Theme","changeColor","vars","require","render","colorSource","modifyVars","e","output","console","error","css","cssText","setCssText","styleEl","styleSheet","func","disabled","setTimeout","innerHTML","id","document","getElementById","head","getElementsByTagName","setAttribute","appendChild","addCSS","prevPropsVars","JSON","stringify","children","App","varName","localStorage","setItem","getColorPicker","key","className","ColorPicker_ColorPicker","presetColors","src_Theme","resetTheme","initialValue","@primary-color","@secondary-color","parse","getItem","_this2","colorPickers","keys","map","ReactDOM","src_App_0","module","exports"],"mappings":"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","file":"static/js/main.6bcb1904.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { ChromePicker, SketchPicker } from 'react-color';\n\nconst noop = () => { };\n\nconst pickers = {\n  chrome: ChromePicker,\n  sketch: SketchPicker,\n};\n\nexport default class ColorPicker extends Component {\n  static defaultProps = {\n    onChange: noop,\n    onChangeComplete: noop,\n    position: 'bottom',\n  }\n\n  constructor(props) {\n    super();\n    this.state = {\n      displayColorPicker: false,\n      color: props.color,\n    };\n  }\n  componentWillReceiveProps(nextProps) {\n    this.setState({ color: nextProps.color });\n  }\n  handleClick = () => {\n    this.setState({ displayColorPicker: !this.state.displayColorPicker });\n  };\n  handleClose = () => {\n    this.setState({ displayColorPicker: false });\n  };\n  handleChange = (color) => {\n    this.setState({ color: color.hex });\n    this.props.onChange(color.hex, color);\n  };\n  handleChangeComplete = (color) => {\n    this.setState({ color: color.hex });\n    this.props.onChangeComplete(color.hex);\n  };\n  render() {\n    const { small, type, position } = this.props;\n\n    const Picker = pickers[type];\n\n    const styles = {\n      color: {\n        width: small ? '16px' : '120px',\n        height: small ? '16px' : '24px',\n        borderRadius: '2px',\n        background: this.state.color,\n      },\n      swatch: {\n        padding: '4px',\n        background: '#fff',\n        borderRadius: '2px',\n        boxShadow: '0 0 0 1px rgba(0,0,0,.1)',\n        display: 'inline-block',\n        cursor: 'pointer',\n      },\n      popover: {\n        position: 'absolute',\n        zIndex: '2',\n      },\n      cover: {\n        position: 'fixed',\n        top: '0px',\n        right: '0px',\n        bottom: '0px',\n        left: '0px',\n      },\n      wrapper: {\n        position: 'inherit',\n        zIndex: '100',\n      },\n    };\n\n    if (position === 'top') {\n      styles.wrapper.transform = 'translateY(-100%)';\n      styles.wrapper.paddingBottom = 8;\n    }\n\n    const swatch = (\n      <div style={styles.swatch} onClick={this.handleClick}>\n        <div style={styles.color} />\n      </div>\n    );\n    const picker = this.state.displayColorPicker ? (\n      <div style={styles.popover}>\n        <div style={styles.cover} onClick={this.handleClose} />\n        <div style={styles.wrapper}>\n          <Picker\n            {...this.props}\n            color={this.state.color}\n            onChange={this.handleChange}\n            onChangeComplete={this.handleChangeComplete}\n          />\n        </div>\n      </div>\n    ) : null;\n\n    if (position === 'top') {\n      return <div>{picker}{swatch}</div>;\n    }\n    return <div>{swatch}{picker}</div>;\n  }\n}\n","/* eslint-disable no-console */\n/* eslint-disable import/no-webpack-loader-syntax */\nimport React, { Component } from \"react\";\nimport colorSource from '!raw-loader!./dest/color.less';\n\nfunction addCSS(cssText) {\n    function setCssText(styleEl) {\n        if (styleEl.styleSheet) {\n            //IE\n            let func = function() {\n                try {\n                    //防止IE中stylesheet数量超过限制而发生错误\n                    styleEl.styleSheet.cssText = cssText;\n                } catch (e) {}\n            };\n            //如果当前styleSheet还不能用，则放到异步中则行\n            if (styleEl.styleSheet.disabled) {\n                setTimeout(func, 10);\n            } else {\n                func();\n            }\n        } else {\n            //w3c\n            //w3c浏览器中只要插入到style元素中就行了\n            styleEl.innerHTML = cssText;\n        }\n    }\n    const id = 'less:theme:color';\n    let styleEl = document.getElementById(id);\n    if (document.getElementById(id)) {\n        setCssText(styleEl);\n    } else {\n        styleEl = document.createElement('style'); //创建一个style元素\n        let head = document.head || document.getElementsByTagName('head')[0]; //获取head元素\n        styleEl.type = 'text/css'; //这里必须显示设置style元素的type属性为text/css，否则在ie中不起作用\n        styleEl.setAttribute('id', id);\n        setCssText(styleEl);\n        head.appendChild(styleEl); //把创建的style元素插入到head中\n    }\n}\n\nclass Theme extends Component {\n    constructor(props) {\n        super(props);\n        this.changeColor(props.vars);\n        this.state = {\n            prevPropsVars: Object.assign({}, props.vars)\n        }\n    }\n\n    componentDidUpdate() {\n        let { vars } = this.props;\n        if (\n            JSON.stringify(vars) !== JSON.stringify(this.state.prevPropsVars)\n        ) {\n            this.changeColor(vars);\n            this.setState({\n                prevPropsVars: Object.assign({}, vars)\n            });\n        }\n    }\n\n    changeColor = (vars) => {\n        const less = require('theme-color-switch');\n        less.render(\n            colorSource,\n            {\n                modifyVars: vars,\n            },\n            function(e, output) {\n                if (e) {\n                    console.error(`Failed to update theme`);\n                }\n                if (output && output.css) {\n                    addCSS(output.css);\n                }\n            }\n        );\n    };\n\n    render() {\n        const { children } = this.props;\n        return children || null;\n    }\n}\n\nexport default Theme;\n","/* eslint-disable no-console */\nimport React, { Component } from \"react\";\n\nimport './App.css';\n\nimport ColorPicker from \"./ColorPicker\";\nimport Theme from './Theme';\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        let initialValue = {\n            '@primary-color': '#1987a7',\n            '@secondary-color': '#0000ff'\n        };\n        let vars = {};\n\n        try {\n            vars = Object.assign({}, initialValue, JSON.parse(localStorage.getItem('app-theme')));\n        } finally {\n            this.state = { vars, initialValue };\n        }\n    }\n    onChangeComplete = (varName, color) => {\n        const { vars } = this.state;\n        vars[varName] = color;\n        this.setState({ vars });\n        localStorage.setItem('app-theme', JSON.stringify(vars));\n    };\n\n    getColorPicker = (varName) => (\n        <div\n            key={varName}\n            className=\"item\">\n            <div>\n                {varName}\n            </div>\n            <div>\n                <ColorPicker\n                    type=\"sketch\"\n                    small\n                    color={this.state.vars[varName]}\n                    position=\"bottom\"\n                    presetColors={[\n                        '#F5222D',\n                        '#FA541C',\n                        '#FA8C16',\n                        '#FAAD14',\n                        '#FADB14',\n                        '#A0D911',\n                        '#52C41A',\n                        '#13C2C2',\n                        '#1890FF',\n                        '#2F54EB',\n                        '#722ED1',\n                        '#EB2F96',\n                    ]}\n                    onChangeComplete={color => this.onChangeComplete(varName, color)}\n                />\n                <Theme vars={this.state.vars} />\n            </div>\n        </div>\n    )\n    resetTheme = () => {\n        localStorage.setItem('app-theme', '{}');\n        this.setState({ vars: this.state.initialValue });\n    }\n\n    render() {\n        const colorPickers = Object.keys(this.state.vars).map(varName => this.getColorPicker(varName));\n        return (\n            <div className=\"App\">\n                <div className=\"color-wrapper\">\n                    <div className=\"title primary\">\n                        Theme\n                    </div>\n                    <div className=\"wrapper-body\">\n                        {colorPickers}\n                    </div>\n                </div>\n                <div className=\"container\">\n                    <div className=\"btn-group\">\n                        <button\n                            type=\"button\"\n                            className=\"btn btn-default\">\n                            Cancel\n                        </button>\n                        <button\n                            type=\"submit\"\n                            className=\"btn btn-primary\">\n                            Submit\n                        </button>\n                    </div>\n                    <div className=\"secondary-color\">\n                        color : @secondary-color;\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport App from './App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n)\n","module.exports = \"@primary-color: #1987a7;\\n@primary-hover-color: shade(@primary-color, 15%);\\n@secondary-color: #0000ff;\\n.btn-primary{background-color:@primary-color;border-color:@primary-color}\\n.btn-primary:hover{background-color:@primary-hover-color;border-color:@primary-hover-color}\\n.btn-primary:active{background-color:@primary-color;border-color:@primary-color}\\n.primary{color:@primary-color}\\n.secondary{color:@secondary-color}\\n.secondary-color{color:@secondary-color}\""],"sourceRoot":""}